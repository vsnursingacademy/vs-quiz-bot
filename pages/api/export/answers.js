import { supabaseAdmin } from '@/lib/supabaseAdmin';
export default async function handler(req,res){const { data } = await supabaseAdmin.from('answers').select('id,attempt_id,question_id,option_id,is_correct,answered_at');const rows=data||[];const header=['id','attempt_id','question_id','option_id','is_correct','answered_at'];const csv=[header.join(',')].concat(rows.map(r=>header.map(h=>`"${(r[h]??'').toString().replace(/"/g,'""')}"`).join(','))).join('\n');res.setHeader('Content-Type','text/csv');res.setHeader('Content-Disposition','attachment; filename="answers.csv"');res.status(200).send(csv);}
