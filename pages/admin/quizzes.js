import { useEffect, useState } from 'react';
import { supabaseClient } from '@/lib/supabaseClient';
import Link from 'next/link';
export default function Quizzes(){const [quizzes,setQuizzes]=useState([]);const [title,setTitle]=useState('');const [slug,setSlug]=useState('');const [description,setDescription]=useState('');async function load(){const {data}=await supabaseClient.from('quizzes').select('*').order('created_at',{ascending:false});setQuizzes(data||[]);}useEffect(()=>{load();},[]);async function createQuiz(e){e.preventDefault();const {error}=await supabaseClient.from('quizzes').insert([{title,slug,description}]);if(!error){setTitle('');setSlug('');setDescription('');load();}}return (<div className="page"><h2>Quizzes</h2><form onSubmit={createQuiz} className="row"><input placeholder="Title" value={title} onChange={e=>setTitle(e.target.value)} required/><input placeholder="slug" value={slug} onChange={e=>setSlug(e.target.value)} required/><input placeholder="Description" value={description} onChange={e=>setDescription(e.target.value)}/><button type="submit">Create</button></form><ul className="list">{quizzes.map(q=>(<li key={q.id}><strong>{q.title}</strong> — <code>{q.slug}</code> — <Link href={`/admin/quizzes/${q.id}/questions`}>Manage Questions</Link> — <Link href={`/quiz/${q.slug}`}>Public page</Link></li>))}</ul></div>)}
